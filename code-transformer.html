<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Transformer - PhishGuard</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="transformer.css">
    <!-- Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="storage.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="dashboard-nav">
        <div class="nav-container">
            <div class="logo" onclick="location.href='dashboard.html'">
                <span class="logo-icon">üõ°Ô∏è</span>
                <span class="logo-text">PhishGuard</span>
            </div>
            <div class="nav-breadcrumb">
                <a href="dashboard.html">Dashboard</a>
                <span>‚Üí</span>
                <span>Code Transformer</span>
            </div>
            <div class="nav-actions">
                <button class="btn btn-secondary" onclick="location.href='dashboard.html'">
                    ‚Üê Back
                </button>
            </div>
        </div>
    </nav>

    <div class="transformer-layout">
        <!-- Sidebar - Template Library -->
        <aside class="transformer-sidebar">
            <div class="sidebar-header">
                <h3>üîß Templates</h3>
                <button class="btn-icon" onclick="toggleSidebar()">‚â°</button>
            </div>

            <div class="template-search">
                <input type="text" placeholder="Search templates..." id="templateSearch" oninput="filterTemplates()">
            </div>

            <div class="template-categories">
                <div class="category active" data-category="all">
                    <span class="category-icon">üìö</span>
                    <span>All Templates</span>
                    <span class="category-count">12</span>
                </div>
                <div class="category" data-category="java">
                    <span class="category-icon">‚òï</span>
                    <span>Java</span>
                    <span class="category-count">4</span>
                </div>
                <div class="category" data-category="python">
                    <span class="category-icon">üêç</span>
                    <span>Python</span>
                    <span class="category-count">3</span>
                </div>
                <div class="category" data-category="cpp">
                    <span class="category-icon">‚öôÔ∏è</span>
                    <span>C/C++</span>
                    <span class="category-count">3</span>
                </div>
                <div class="category" data-category="javascript">
                    <span class="category-icon">üìú</span>
                    <span>JavaScript</span>
                    <span class="category-count">2</span>
                </div>
            </div>

            <div class="template-list" id="templateList">
                <!-- Templates populated by JavaScript -->
            </div>
        </aside>

        <!-- Main Content -->
        <main class="transformer-main">
            <!-- Header -->
            <div class="transformer-header">
                <div class="header-content">
                    <h1>üîÑ Code Transformer</h1>
                    <p>Transform quantum-vulnerable code to post-quantum safe alternatives</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="swapCode()">
                        <span class="btn-icon">‚áÑ</span>
                        <span>Swap</span>
                    </button>
                    <button class="btn btn-primary" onclick="applyTransformation()">
                        <span class="btn-icon">‚ú®</span>
                        <span>Transform Code</span>
                    </button>
                </div>
            </div>

            <!-- Template Info Banner -->
            <div class="template-info" id="templateInfo">
                <div class="info-content">
                    <div class="info-icon">‚ÑπÔ∏è</div>
                    <div class="info-text">
                        <strong>Select a template</strong> from the sidebar to get started
                    </div>
                </div>
            </div>

            <!-- Code Editor Section -->
            <div class="code-panels">
                <!-- Before Panel -->
                <div class="code-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span class="panel-icon">‚ö†Ô∏è</span>
                            <span>Vulnerable Code</span>
                            <span class="risk-badge high">HIGH RISK</span>
                        </div>
                        <div class="panel-actions">
                            <button class="btn-icon" onclick="copyCode('before')" title="Copy">
                                üìã
                            </button>
                            <button class="btn-icon" onclick="uploadCode()" title="Upload File">
                                üìÅ
                            </button>
                        </div>
                    </div>
                    <div class="code-editor">
                        <textarea id="beforeCode" placeholder="Paste your vulnerable code here or select a template..."></textarea>
                    </div>
                    <div class="code-preview" id="beforePreview">
                        <pre><code class="language-java"></code></pre>
                    </div>
                    <input type="file" id="fileInput" style="display: none;" accept=".java,.cpp,.py,.js,.c,.h" onchange="handleFileUpload(event)">
                </div>

                <!-- Arrow Separator -->
                <div class="code-arrow">
                    <div class="arrow-icon">‚Üí</div>
                    <div class="arrow-label">Transform</div>
                </div>

                <!-- After Panel -->
                <div class="code-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span class="panel-icon">‚úÖ</span>
                            <span>Quantum-Safe Code</span>
                            <span class="risk-badge low">SAFE</span>
                        </div>
                        <div class="panel-actions">
                            <button class="btn-icon" onclick="copyCode('after')" title="Copy">
                                üìã
                            </button>
                            <button class="btn-icon" onclick="downloadCode()" title="Download">
                                üíæ
                            </button>
                        </div>
                    </div>
                    <div class="code-editor">
                        <textarea id="afterCode" readonly placeholder="Transformed code will appear here..."></textarea>
                    </div>
                    <div class="code-preview" id="afterPreview">
                        <pre><code class="language-java"></code></pre>
                    </div>
                </div>
            </div>

            <!-- Transformation Details -->
            <div class="transformation-details" id="transformationDetails" style="display: none;">
                <div class="details-header">
                    <h3>üìù Transformation Details</h3>
                    <button class="btn-icon" onclick="toggleDetails()">√ó</button>
                </div>
                <div class="details-content">
                    <div class="detail-section">
                        <h4>Changes Made:</h4>
                        <ul id="changesList"></ul>
                    </div>
                    <div class="detail-section">
                        <h4>Security Improvements:</h4>
                        <ul id="improvementsList"></ul>
                    </div>
                    <div class="detail-section">
                        <h4>Implementation Notes:</h4>
                        <div id="implementationNotes"></div>
                    </div>
                    <div class="detail-section">
                        <h4>Required Libraries:</h4>
                        <div id="librariesList"></div>
                    </div>
                </div>
            </div>

            <!-- Batch Transform Section -->
            <div class="batch-transform">
                <div class="batch-header">
                    <h3>üîÑ Batch Transform Multiple Files</h3>
                    <button class="btn btn-secondary" onclick="toggleBatchTransform()">
                        <span>Upload Multiple Files</span>
                    </button>
                </div>
                <div class="batch-content" id="batchContent" style="display: none;">
                    <div class="batch-upload">
                        <input type="file" id="batchFileInput" multiple accept=".java,.cpp,.py,.js,.c,.h" onchange="handleBatchUpload(event)" style="display: none;">
                        <div class="upload-zone" onclick="document.getElementById('batchFileInput').click()">
                            <div class="upload-icon">üìÅ</div>
                            <p>Click to upload multiple files</p>
                            <span class="upload-hint">Supports .java, .cpp, .py, .js, .c, .h</span>
                        </div>
                    </div>
                    <div class="batch-files" id="batchFiles"></div>
                    <button class="btn btn-primary" onclick="processBatchTransform()" id="batchTransformBtn" style="display: none;">
                        Transform All Files
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Success Toast -->
    <div class="toast" id="toast">
        <span class="toast-icon">‚úì</span>
        <span class="toast-message">Code copied to clipboard!</span>
    </div>

    <script src="main.js"></script>
    <script src="templates.js"></script>
    <script src="transformer.js"></script>
</body>
</html>
